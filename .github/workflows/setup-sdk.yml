name: Setup TypeScript SDK

on:
  workflow_dispatch:
  pull_request:
    paths:
      - 'scripts/setup-typescript-sdk.sh'
      - 'package.json'

jobs:
  setup-sdk:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      with:
        submodules: recursive  # This will include the overseer submodule
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Setup TypeScript SDK
      run: |
        chmod +x scripts/setup-typescript-sdk.sh
        ./scripts/setup-typescript-sdk.sh
    
    - name: Verify installation
      run: |
        node -e "require('@felix/overseer-sdk-ts'); console.log('SDK verified')"
